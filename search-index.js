crystal_doc_search_index_callback({"repository_name":"github.com/onyxframework/onyx","body":"<a href=\"https://onyxframework.org\"><img width=\"100\" height=\"100\" src=\"https://onyxframework.org/img/logo.svg\"></a>\n\n# Onyx\n\n[![Built with Crystal](https://img.shields.io/badge/built%20with-crystal-000000.svg?style=flat-square)](https://crystal-lang.org/)\n[![Travis CI build](https://img.shields.io/travis/onyxframework/onyx/stable.svg?style=flat-square)](https://travis-ci.org/onyxframework/onyx)\n[![Docs](https://img.shields.io/badge/docs-online-brightgreen.svg?style=flat-square)](https://docs.onyxframework.org)\n[![API docs](https://img.shields.io/badge/api_docs-online-brightgreen.svg?style=flat-square)](https://api.onyxframework.org/onyx)\n[![Latest release](https://img.shields.io/github/release/onyxframework/onyx.svg?style=flat-square)](https://github.com/onyxframework/onyx/releases)\n\nPowerful framework for modern applications.\n\n## About üëã\n\nOnyx Framework is a powerful general purpose framework for [Crystal language](https://crystal-lang.org/). It has the following goals:\n\n* **Joy** for newcomers, yet an ability to scale with the developer's knowledge\n* **Type-safety** on top of Crystal's amazing built-in type system\n* **Performance** having minimum possible overhead\n\nThe framework consists of the following loosely coupled components:\n\n* [Onyx::HTTP](https://github.com/onyxframework/http) to build scalable web applications\n* [Onyx::SQL](https://github.com/onyxframework/sql) to add SQL models to your business layer\n* [Onyx::EDA](https://github.com/onyxframework/eda) to implement events-based reactivity\n\n## Supporters üïä\n\nThanks to all these patrons, the framework lives and prospers üôè\n\n[Lauri Jutila](https://github.com/ljuti), [Alexander Maslov](https://seendex.ru), Anton Yordanov\n\n*You can become a patron too in exchange of prioritized support and other perks*\n\n<a href=\"https://www.patreon.com/vladfaust\"><img height=\"50\" src=\"https://onyxframework.org/img/patreon-button.svg\"></a>\n\n## Installation üì•\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  onyx:\n    github: onyxframework/onyx\n    version: ~> 0.4.0\n```\n\nThis shard follows [Semantic Versioning v2.0.0](http://semver.org/), so check [releases](https://github.com/onyxframework/rest/releases) and change the `version` accordingly.\n\n> Note that until Crystal is officially released, this shard would be in beta state (`0.*.*`), with every **minor** release considered breaking. For example, `0.1.0` ‚Üí `0.2.0` is breaking and `0.1.0` ‚Üí `0.1.1` is not.\n\nNote that this shard does **not** have implicit dependencies for other framework components. For example, to use `\"onyx/http\"` macros, you must add `onyx-http` dependendency as well:\n\n```yaml\ndependencies:\n  onyx:\n    github: onyxframework/onyx\n    version: ~> 0.4.0\n  onyx-http:\n    github: onyxframework/http\n    version: ~> 0.8.0\n```\n\n## Documentation üìö\n\nThe documentation is available online at [docs.onyxframework.org](https://docs.onyxframework.org).\n\n## Community üç™\n\nThere are multiple places to talk about this particular shard and about other ones as well:\n\n* [Gitter](https://gitter.im/onyxframework/Lobby)\n* [Twitter](https://twitter.com/onyxframework)\n\n## Contributing\n\n1. Fork it ( https://github.com/onyxframework/onyx/fork )\n2. Create your feature branch (git checkout -b my-new-feature)\n3. Commit your changes (git commit -am 'feat: some feature') using [Angular style commits](https://github.com/angular/angular/blob/master/CONTRIBUTING.md#commit)\n4. Push to the branch (git push origin my-new-feature)\n5. Create a new Pull Request\n\n## Contributors\n\n- [Vlad Faust](https://github.com/vladfaust) - creator and maintainer\n\n## Licensing\n\nThis software is licensed under [MIT License](LICENSE).\n\n[![Open Source Initiative](https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Opensource.svg/100px-Opensource.svg.png)](https://opensource.org/licenses/MIT)\n","program":{"html_id":"github.com/onyxframework/onyx/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/onyxframework/onyx","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"custom_log_formatter-class-method","html_id":"custom_log_formatter-class-method","name":"custom_log_formatter","doc":"A custom log formatter.\n\n```\nrequire \"./custom_log_formatter\"\nlogger = Logger.new(STDOUT, Logger::DEBUG, custom_log_formatter)\nDEBUG [12:45:52.520 #13543] Hello world!\n```","summary":"<p>A custom log formatter.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/utils/custom_log_formatter.cr#L11","def":{"name":"custom_log_formatter","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Logger::Formatter.new do |severity, time, progname, message, io|\n  fore, back = case severity\n  when Logger::DEBUG\n    {:dark_gray, nil}\n  when Logger::INFO\n    {:green, nil}\n  when Logger::WARN\n    {:yellow, nil}\n  when Logger::ERROR\n    {nil, :red}\n  when Logger::FATAL\n    {nil, :red}\n  else\n    {nil, nil}\n  end\n  prefix = ((severity.to_s.rjust(5)) + \" [#{time.to_s(\"%X.%L\")} ##{Process.pid}]\").colorize\n  if fore\n    prefix.fore(fore)\n  end\n  if back\n    prefix.back(back)\n  end\n  ((io << prefix) << ' ') << message\nend"}}],"constructors":[],"instance_methods":[],"macros":[{"id":"buildtime_env(*env)-macro","html_id":"buildtime_env(*env)-macro","name":"buildtime_env","doc":"Define a required buildtime environment variable which would raise on missing.","summary":"<p>Define a required buildtime environment variable which would raise on missing.</p>","abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(*env)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/utils/require_env.cr#L9","def":{"name":"buildtime_env","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":0,"block_arg":null,"visibility":"Public","body":"  \n{% for env in envs %}\n    {% unless env(\"#{env.id}\")\n  raise(\"Buildtime environment variable #{env.id} is not defined!\")\nend %}\n  {% end %}\n\n\n"}},{"id":"runtime_env(*envs)-macro","html_id":"runtime_env(*envs)-macro","name":"runtime_env","doc":"Define a required runtime environment variable which would raise on missing.","summary":"<p>Define a required runtime environment variable which would raise on missing.</p>","abstract":false,"args":[{"name":"envs","doc":null,"default_value":"","external_name":"envs","restriction":""}],"args_string":"(*envs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/utils/require_env.cr#L2","def":{"name":"runtime_env","args":[{"name":"envs","doc":null,"default_value":"","external_name":"envs","restriction":""}],"double_splat":null,"splat_index":0,"block_arg":null,"visibility":"Public","body":"  \n{% for env in envs %}\n    raise \"Runtime environment variable {{ env.id }} is not defined!\" unless ENV.has_key?(\"{{ env.id }}\")\n  {% end %}\n\n\n"}}],"types":[{"html_id":"github.com/onyxframework/onyx/Onyx","path":"Onyx.html","kind":"module","full_name":"Onyx","name":"Onyx","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"onyx.cr","line_number":32,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx.cr"},{"filename":"onyx/logger.cr","line_number":7,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/logger.cr"},{"filename":"onyx/db.cr","line_number":6,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/db.cr"},{"filename":"lib/onyx-eda/src/onyx-eda.cr","line_number":3,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-eda/src/onyx-eda.cr"},{"filename":"lib/onyx-http/src/onyx-http.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-http/src/onyx-http.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"Powerful framework for modern applications.\nSee [onyxframework.org](https://onyxframework.org).","summary":"<p>Powerful framework for modern applications.</p>","class_methods":[{"id":"db:DB::Database-class-method","html_id":"db:DB::Database-class-method","name":"db","doc":"Singleton `DB::Database` instance.\nIt **requires** `DATABASE_URL` environment variable to be set.\nIt would validate the connection on program run with\n`Onyx.db.scalar(\"SELECT 1\")` call, raising of failure.","summary":"<p>Singleton <code>DB::Database</code> instance.</p>","abstract":false,"args":[],"args_string":" : DB::Database","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/db.cr#L13","def":{"name":"db","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"DB::Database","visibility":"Public","body":"@@db"}},{"id":"db=(db:DB::Database)-class-method","html_id":"db=(db:DB::Database)-class-method","name":"db=","doc":"Singleton `DB::Database` instance.\nIt **requires** `DATABASE_URL` environment variable to be set.\nIt would validate the connection on program run with\n`Onyx.db.scalar(\"SELECT 1\")` call, raising of failure.","summary":"<p>Singleton <code>DB::Database</code> instance.</p>","abstract":false,"args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"args_string":"(db : DB::Database)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/db.cr#L17","def":{"name":"db=","args":[{"name":"db","doc":null,"default_value":"","external_name":"db","restriction":"DB::Database"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@db = db"}},{"id":"logger:Logger-class-method","html_id":"logger:Logger-class-method","name":"logger","doc":"The singleton `Logger` instance. It has a custom slim formatter and\nlevel depending on `CRYSTAL_ENV` environment variable:\n\n* `\"production\"` -- `INFO`\n* `\"benchmarking\"` -- `FATAL`, outputs to `dev/null`\n* all other (including `nil`) -- `DEBUG`\n\n```\nrequire \"onyx/logger\"\nOnyx.logger.debug(\"Hello world!\")\n# DEBUG [12:45:52.520 #13543] Hello world!\n```","summary":"<p>The singleton <code>Logger</code> instance.</p>","abstract":false,"args":[],"args_string":" : Logger","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/logger.cr#L29","def":{"name":"logger","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Logger","visibility":"Public","body":"@@logger"}},{"id":"logger=(logger:Logger)-class-method","html_id":"logger=(logger:Logger)-class-method","name":"logger=","doc":"The singleton `Logger` instance. It has a custom slim formatter and\nlevel depending on `CRYSTAL_ENV` environment variable:\n\n* `\"production\"` -- `INFO`\n* `\"benchmarking\"` -- `FATAL`, outputs to `dev/null`\n* all other (including `nil`) -- `DEBUG`\n\n```\nrequire \"onyx/logger\"\nOnyx.logger.debug(\"Hello world!\")\n# DEBUG [12:45:52.520 #13543] Hello world!\n```","summary":"<p>The singleton <code>Logger</code> instance.</p>","abstract":false,"args":[{"name":"logger","doc":null,"default_value":"","external_name":"logger","restriction":"Logger"}],"args_string":"(logger : Logger)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/logger.cr#L33","def":{"name":"logger=","args":[{"name":"logger","doc":null,"default_value":"","external_name":"logger","restriction":"Logger"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@logger = logger"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/onyxframework/onyx/Onyx/EDA","path":"Onyx/EDA.html","kind":"module","full_name":"Onyx::EDA","name":"EDA","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"lib/onyx-eda/src/onyx-eda.cr","line_number":5,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-eda/src/onyx-eda.cr"},{"filename":"lib/onyx-eda/src/onyx-eda/channel/memory.cr","line_number":3,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-eda/src/onyx-eda/channel/memory.cr"},{"filename":"lib/onyx-eda/src/onyx-eda/channel.cr","line_number":5,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-eda/src/onyx-eda/channel.cr"},{"filename":"onyx/eda/memory.cr","line_number":4,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/eda/memory.cr"},{"filename":"lib/onyx-eda/src/onyx-eda/channel/redis.cr","line_number":21,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-eda/src/onyx-eda/channel/redis.cr"},{"filename":"onyx/eda/redis.cr","line_number":6,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/eda/redis.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/onyxframework/onyx/Onyx","kind":"module","full_name":"Onyx","name":"Onyx"},"doc":"Event-Driven Architecture framework. Read more at [Wikipedia](https://en.wikipedia.org/wiki/Event-driven_architecture).","summary":"<p>Event-Driven Architecture framework.</p>","class_methods":[{"id":"memory-class-method","html_id":"memory-class-method","name":"memory","doc":"Singleton [`Onyx::EDA::Channel::Memory`](https://api.onyxframework.org/eda/Onyx/EDA/Channel/Memory.html) instance.\n\n`require \"onyx/eda/memory\"` to enable it.","summary":"<p>Singleton <a href=\"https://api.onyxframework.org/eda/Onyx/EDA/Channel/Memory.html\" target=\"_blank\"><code>Onyx::EDA::Channel::Memory</code></a> instance.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/eda/memory.cr#L10","def":{"name":"memory","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@memory"}},{"id":"redis-class-method","html_id":"redis-class-method","name":"redis","doc":"Singleton [`Onyx::EDA::Channel::Redis`](https://api.onyxframework.org/eda/Onyx/EDA/Channel/Redis.html) instance.\n\nNOTE: It **requires** `REDIS_URL` environment variable to be set.\n\n`require \"onyx/eda/redis\"` to enable it.","summary":"<p>Singleton <a href=\"https://api.onyxframework.org/eda/Onyx/EDA/Channel/Redis.html\" target=\"_blank\"><code>Onyx::EDA::Channel::Redis</code></a> instance.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/eda/redis.cr#L17","def":{"name":"redis","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@redis"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP","path":"Onyx/HTTP.html","kind":"module","full_name":"Onyx::HTTP","name":"HTTP","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"lib/onyx-http/src/onyx-http.cr","line_number":3,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-http/src/onyx-http.cr"},{"filename":"lib/onyx-http/src/onyx-http/error.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-http/src/onyx-http/error.cr"},{"filename":"lib/onyx-http/src/onyx-http/server.cr","line_number":3,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-http/src/onyx-http/server.cr"},{"filename":"onyx/http.cr","line_number":6,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr"},{"filename":"onyx/http/spec.cr","line_number":3,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/onyxframework/onyx/Onyx","kind":"module","full_name":"Onyx","name":"Onyx"},"doc":"HTTP framework.","summary":"<p>HTTP framework.</p>","class_methods":[{"id":"delete(*args,**nargs,&block:HTTP::Server::Context->Nil)-class-method","html_id":"delete(*args,**nargs,&amp;block:HTTP::Server::Context-&gt;Nil)-class-method","name":"delete","doc":"Define a DELETE route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#delete`.","summary":"<p>Define a DELETE route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"delete","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.delete(*args, **nargs, &block)"}},{"id":"delete(*args,**nargs)-class-method","html_id":"delete(*args,**nargs)-class-method","name":"delete","doc":"Define a DELETE route for the singleton `.router`.\nSee `Onyx::HTTP::Router#delete`.","summary":"<p>Define a DELETE route for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"delete","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.delete(*args, **nargs)"}},{"id":"get(*args,**nargs,&block:HTTP::Server::Context->Nil)-class-method","html_id":"get(*args,**nargs,&amp;block:HTTP::Server::Context-&gt;Nil)-class-method","name":"get","doc":"Define a GET route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#get`.","summary":"<p>Define a GET route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"get","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.get(*args, **nargs, &block)"}},{"id":"get(*args,**nargs)-class-method","html_id":"get(*args,**nargs)-class-method","name":"get","doc":"Define a GET route for the singleton `.router`.\nSee `Onyx::HTTP::Router#get`.","summary":"<p>Define a GET route for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"get","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.get(*args, **nargs)"}},{"id":"head(*args,**nargs)-class-method","html_id":"head(*args,**nargs)-class-method","name":"head","doc":"Define a HEAD route for the singleton `.router`.\nSee `Onyx::HTTP::Router#head`.","summary":"<p>Define a HEAD route for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"head","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.head(*args, **nargs)"}},{"id":"head(*args,**nargs,&block:HTTP::Server::Context->Nil)-class-method","html_id":"head(*args,**nargs,&amp;block:HTTP::Server::Context-&gt;Nil)-class-method","name":"head","doc":"Define a HEAD route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#head`.","summary":"<p>Define a HEAD route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"head","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.head(*args, **nargs, &block)"}},{"id":"on(*args,**nargs,&block:Onyx::HTTP::Middleware::Router->)-class-method","html_id":"on(*args,**nargs,&amp;block:Onyx::HTTP::Middleware::Router-&gt;)-class-method","name":"on","doc":"Draw routes for the singleton `.router`.\nSee `HTTP::Router#draw`.","summary":"<p>Draw routes for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : Onyx::HTTP::Middleware::Router -> )","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L34","def":{"name":"on","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(Onyx::HTTP::Middleware::Router -> )"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.on(*args, **nargs, &block)"}},{"id":"options(*args,**nargs,&block:HTTP::Server::Context->Nil)-class-method","html_id":"options(*args,**nargs,&amp;block:HTTP::Server::Context-&gt;Nil)-class-method","name":"options","doc":"Define a OPTIONS route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#options`.","summary":"<p>Define a OPTIONS route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"options","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.options(*args, **nargs, &block)"}},{"id":"options(*args,**nargs)-class-method","html_id":"options(*args,**nargs)-class-method","name":"options","doc":"Define a OPTIONS route for the singleton `.router`.\nSee `Onyx::HTTP::Router#options`.","summary":"<p>Define a OPTIONS route for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"options","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.options(*args, **nargs)"}},{"id":"patch(*args,**nargs,&block:HTTP::Server::Context->Nil)-class-method","html_id":"patch(*args,**nargs,&amp;block:HTTP::Server::Context-&gt;Nil)-class-method","name":"patch","doc":"Define a PATCH route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#patch`.","summary":"<p>Define a PATCH route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"patch","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.patch(*args, **nargs, &block)"}},{"id":"patch(*args,**nargs)-class-method","html_id":"patch(*args,**nargs)-class-method","name":"patch","doc":"Define a PATCH route for the singleton `.router`.\nSee `Onyx::HTTP::Router#patch`.","summary":"<p>Define a PATCH route for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"patch","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.patch(*args, **nargs)"}},{"id":"post(*args,**nargs)-class-method","html_id":"post(*args,**nargs)-class-method","name":"post","doc":"Define a POST route for the singleton `.router`.\nSee `Onyx::HTTP::Router#post`.","summary":"<p>Define a POST route for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"post","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.post(*args, **nargs)"}},{"id":"post(*args,**nargs,&block:HTTP::Server::Context->Nil)-class-method","html_id":"post(*args,**nargs,&amp;block:HTTP::Server::Context-&gt;Nil)-class-method","name":"post","doc":"Define a POST route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#post`.","summary":"<p>Define a POST route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"post","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.post(*args, **nargs, &block)"}},{"id":"put(*args,**nargs,&block:HTTP::Server::Context->Nil)-class-method","html_id":"put(*args,**nargs,&amp;block:HTTP::Server::Context-&gt;Nil)-class-method","name":"put","doc":"Define a PUT route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#put`.","summary":"<p>Define a PUT route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"put","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.put(*args, **nargs, &block)"}},{"id":"put(*args,**nargs)-class-method","html_id":"put(*args,**nargs)-class-method","name":"put","doc":"Define a PUT route for the singleton `.router`.\nSee `Onyx::HTTP::Router#put`.","summary":"<p>Define a PUT route for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L7","def":{"name":"put","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.put(*args, **nargs)"}},{"id":"renderer-class-method","html_id":"renderer-class-method","name":"renderer","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L58","def":{"name":"renderer","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"HTTP::Singleton.instance.renderer"}},{"id":"renderer=(value)-class-method","html_id":"renderer=(value)-class-method","name":"renderer=","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(value)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L54","def":{"name":"renderer=","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"HTTP::Singleton.instance.renderer = value"}},{"id":"router-class-method","html_id":"router-class-method","name":"router","doc":"The singleton `HTTP::Router` instance.","summary":"<p>The singleton <code>HTTP::Router</code> instance.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L39","def":{"name":"router","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router"}},{"id":"ws(*args,**nargs,&block:::HTTP::WebSocket,HTTP::Server::Context->Nil)-class-method","html_id":"ws(*args,**nargs,&amp;block:::HTTP::WebSocket,HTTP::Server::Context-&gt;Nil)-class-method","name":"ws","doc":"Define a \"ws://\" route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#ws`.","summary":"<p>Define a \"ws://\" route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs, &block : ::HTTP::WebSocket, HTTP::Server::Context -> Nil)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L23","def":{"name":"ws","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":2,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::HTTP::WebSocket, ::HTTP::Server::Context -> Nil)"},"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.ws(*args, **nargs, &block)"}},{"id":"ws(*args,**nargs)-class-method","html_id":"ws(*args,**nargs)-class-method","name":"ws","doc":"Define a \"ws://\" route with block for the singleton `.router`.\nSee `Onyx::HTTP::Router#ws`.","summary":"<p>Define a \"ws://\" route with block for the singleton <code><a href=\"../Onyx/HTTP.html#router-class-method\">.router</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L28","def":{"name":"ws","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Onyx::HTTP::Singleton.instance.router.ws(*args, **nargs)"}}],"constructors":[],"instance_methods":[],"macros":[{"id":"listen(host=&quot;127.0.0.1&quot;,port=3000,reuse_port=false,**handler_options,&block)-macro","html_id":"listen(host=&amp;quot;127.0.0.1&amp;quot;,port=3000,reuse_port=false,**handler_options,&amp;block)-macro","name":"listen","doc":"Instantiate an `Onyx::HTTP::Server`, bind it to the *host* and *port* and start listening.\nRoutes for it are defined with singleton `Onyx::HTTP.get` methods and its siblings.\n\nYou can insert your custom code into the `&block`.\nAt this point, `handlers` variable will be available.","summary":"<p>Instantiate an <code>Onyx::HTTP::Server</code>, bind it to the <em>host</em> and <em>port</em> and start listening.</p>","abstract":false,"args":[{"name":"host","doc":null,"default_value":"\"127.0.0.1\"","external_name":"host","restriction":""},{"name":"port","doc":null,"default_value":"3000","external_name":"port","restriction":""},{"name":"reuse_port","doc":null,"default_value":"false","external_name":"reuse_port","restriction":""}],"args_string":"(host = <span class=\"s\">&quot;127.0.0.1&quot;</span>, port = <span class=\"n\">3000</span>, reuse_port = <span class=\"n\">false</span>, **handler_options, &block)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L4","def":{"name":"listen","args":[{"name":"host","doc":null,"default_value":"\"127.0.0.1\"","external_name":"host","restriction":""},{"name":"port","doc":null,"default_value":"3000","external_name":"port","restriction":""},{"name":"reuse_port","doc":null,"default_value":"false","external_name":"reuse_port","restriction":""}],"double_splat":{"name":"handler_options","doc":null,"default_value":"","external_name":"handler_options","restriction":""},"splat_index":null,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":""},"visibility":"Public","body":"    handlers = Onyx::HTTP::Singleton.instance.handlers(\n{{ handler_options.double_splat }}\n)\n\n    \n{{ (yield).id }}\n\n\n    server = Onyx::HTTP::Server.new(handlers, logger: Onyx.logger)\n    server.bind_tcp(\n{{ host }}\n, \n{{ port }}\n, reuse_port: \n{{ reuse_port }}\n)\n\n    spawn server.listen\n    sleep(0.1)\n\n    Onyx::HTTP::Spec.client = ::HTTP::Client.new(URI.new(\"http\", \n{{ host }}\n, \n{{ port }}\n))\n  \n"}},{"id":"render(io,path)-macro","html_id":"render(io,path)-macro","name":"render","doc":"Render a template at *path* into *io* with [Kilt](https://github.com/jeromegn/kilt).\n\n```\nOnyx::HTTP.render(env.response, \"./hello.html.ecr\")\n# Expands to\nKilt.embed(\"./hello.html.ecr\", env.response)\n```","summary":"<p>Render a template at <em>path</em> into <em>io</em> with <a href=\"https://github.com/jeromegn/kilt\" target=\"_blank\">Kilt</a>.</p>","abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"args_string":"(io, path)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L50","def":{"name":"render","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""},{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    Kilt.embed(\n{{ path }}\n, \n{{ io }}\n)\n  \n"}}],"types":[{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP/Singleton","path":"Onyx/HTTP/Singleton.html","kind":"class","full_name":"Onyx::HTTP::Singleton","name":"Singleton","abstract":false,"superclass":{"html_id":"github.com/onyxframework/onyx/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/onyxframework/onyx/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/onyxframework/onyx/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"onyx/http.cr","line_number":77,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP","kind":"module","full_name":"Onyx::HTTP","name":"HTTP"},"doc":"The singleton instance of an Onyx HTTP server wrapper.\nIt is **not** initialized unless called.","summary":"<p>The singleton instance of an Onyx HTTP server wrapper.</p>","class_methods":[{"id":"instance-class-method","html_id":"instance-class-method","name":"instance","doc":"The singleton instance.","summary":"<p>The singleton instance.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L79","def":{"name":"instance","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@instance || (@@instance = new)"}}],"constructors":[],"instance_methods":[{"id":"handlers(cors=nil)-instance-method","html_id":"handlers(cors=nil)-instance-method","name":"handlers","doc":"The default set of handlers. See its source code to find out which handlers in particular.\nYou can in theory modify these handlers in the `Onyx.listen` block.","summary":"<p>The default set of handlers.</p>","abstract":false,"args":[{"name":"cors","doc":null,"default_value":"nil","external_name":"cors","restriction":""}],"args_string":"(cors = <span class=\"n\">nil</span>)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L97","def":{"name":"handlers","args":[{"name":"cors","doc":null,"default_value":"nil","external_name":"cors","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if ENV[\"CRYSTAL_ENV\"] == \"benchmarking\"\n  [Middleware::Rescuer::Silent(Exception).new(renderer), Middleware::Rescuer::Error.new(renderer), router, renderer].compact!\nelse\n  [Middleware::ResponseTime.new, Middleware::RequestID.new, Middleware::Logger.new(Onyx.logger, query: ENV[\"CRYSTAL_ENV\"] != \"production\"), cors ? Middleware::CORS.new(**cors) : Middleware::CORS.new, Middleware::Rescuer::Standard(Exception).new(renderer, Onyx.logger, verbose: true), Middleware::Rescuer::Error.new(renderer), router, renderer].compact!\nend"}},{"id":"renderer:HTTP::Handler-instance-method","html_id":"renderer:HTTP::Handler-instance-method","name":"renderer","doc":"The singleton renderer instance.","summary":"<p>The singleton renderer instance.</p>","abstract":false,"args":[],"args_string":" : HTTP::Handler","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L93","def":{"name":"renderer","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@renderer"}},{"id":"renderer=(renderer)-instance-method","html_id":"renderer=(renderer)-instance-method","name":"renderer=","doc":"The singleton renderer instance.","summary":"<p>The singleton renderer instance.</p>","abstract":false,"args":[{"name":"renderer","doc":null,"default_value":"","external_name":"renderer","restriction":""}],"args_string":"(renderer)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L93","def":{"name":"renderer=","args":[{"name":"renderer","doc":null,"default_value":"","external_name":"renderer","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@renderer = renderer"}},{"id":"router:Onyx::HTTP::Middleware::Router-instance-method","html_id":"router:Onyx::HTTP::Middleware::Router-instance-method","name":"router","doc":"The singleton `HTTP::Router` instance.","summary":"<p>The singleton <code>HTTP::Router</code> instance.</p>","abstract":false,"args":[],"args_string":" : Onyx::HTTP::Middleware::Router","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L86","def":{"name":"router","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@router"}},{"id":"router=(router)-instance-method","html_id":"router=(router)-instance-method","name":"router=","doc":"The singleton `HTTP::Router` instance.","summary":"<p>The singleton <code>HTTP::Router</code> instance.</p>","abstract":false,"args":[{"name":"router","doc":null,"default_value":"","external_name":"router","restriction":""}],"args_string":"(router)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http.cr#L86","def":{"name":"router=","args":[{"name":"router","doc":null,"default_value":"","external_name":"router","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@router = router"}}],"macros":[],"types":[]},{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP/Spec","path":"Onyx/HTTP/Spec.html","kind":"module","full_name":"Onyx::HTTP::Spec","name":"Spec","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"onyx/http/spec.cr","line_number":21,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP","kind":"module","full_name":"Onyx::HTTP","name":"HTTP"},"doc":"HTTP testing module. It helps to test your Onyx application.\n`require \"onyx/http/spec\"` **before** your application, so it\nspawn a server instead of blocking on `Onyx::HTTP.listen`.","summary":"<p>HTTP testing module.</p>","class_methods":[{"id":"client-class-method","html_id":"client-class-method","name":"client","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":null,"def":{"name":"client","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@client.not_nil!"}},{"id":"client=(client:::HTTP::Client)-class-method","html_id":"client=(client:::HTTP::Client)-class-method","name":"client=","doc":null,"summary":null,"abstract":false,"args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":"::HTTP::Client"}],"args_string":"(client : ::HTTP::Client)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L22","def":{"name":"client=","args":[{"name":"client","doc":null,"default_value":"","external_name":"client","restriction":"::HTTP::Client"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@client = client"}},{"id":"client?-class-method","html_id":"client?-class-method","name":"client?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":null,"def":{"name":"client?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@client"}},{"id":"delete(*args,**nargs)-class-method","html_id":"delete(*args,**nargs)-class-method","name":"delete","doc":"Send `DELETE` request to the Onyx server and\nreturn `ResponseWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"returns 200 OK\" do\n  response = Onyx::HTTP::Spec.get(\"/foo\")\n  response.assert(200, \"OK\")\nend\n```","summary":"<p>Send <code>DELETE</code> request to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/ResponseWrapper.html\">ResponseWrapper</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L24","def":{"name":"delete","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"response = client.delete(*args, **nargs)\nreturn ResponseWrapper.new(response)\n"}},{"id":"get(*args,**nargs)-class-method","html_id":"get(*args,**nargs)-class-method","name":"get","doc":"Send `GET` request to the Onyx server and\nreturn `ResponseWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"returns 200 OK\" do\n  response = Onyx::HTTP::Spec.get(\"/foo\")\n  response.assert(200, \"OK\")\nend\n```","summary":"<p>Send <code>GET</code> request to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/ResponseWrapper.html\">ResponseWrapper</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L24","def":{"name":"get","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"response = client.get(*args, **nargs)\nreturn ResponseWrapper.new(response)\n"}},{"id":"head(*args,**nargs)-class-method","html_id":"head(*args,**nargs)-class-method","name":"head","doc":"Send `HEAD` request to the Onyx server and\nreturn `ResponseWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"returns 200 OK\" do\n  response = Onyx::HTTP::Spec.get(\"/foo\")\n  response.assert(200, \"OK\")\nend\n```","summary":"<p>Send <code>HEAD</code> request to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/ResponseWrapper.html\">ResponseWrapper</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L24","def":{"name":"head","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"response = client.head(*args, **nargs)\nreturn ResponseWrapper.new(response)\n"}},{"id":"options(*args,**nargs)-class-method","html_id":"options(*args,**nargs)-class-method","name":"options","doc":"Send `OPTIONS` request to the Onyx server and\nreturn `ResponseWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"returns 200 OK\" do\n  response = Onyx::HTTP::Spec.get(\"/foo\")\n  response.assert(200, \"OK\")\nend\n```","summary":"<p>Send <code>OPTIONS</code> request to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/ResponseWrapper.html\">ResponseWrapper</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L24","def":{"name":"options","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"response = client.options(*args, **nargs)\nreturn ResponseWrapper.new(response)\n"}},{"id":"patch(*args,**nargs)-class-method","html_id":"patch(*args,**nargs)-class-method","name":"patch","doc":"Send `PATCH` request to the Onyx server and\nreturn `ResponseWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"returns 200 OK\" do\n  response = Onyx::HTTP::Spec.get(\"/foo\")\n  response.assert(200, \"OK\")\nend\n```","summary":"<p>Send <code>PATCH</code> request to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/ResponseWrapper.html\">ResponseWrapper</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L24","def":{"name":"patch","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"response = client.patch(*args, **nargs)\nreturn ResponseWrapper.new(response)\n"}},{"id":"post(*args,**nargs)-class-method","html_id":"post(*args,**nargs)-class-method","name":"post","doc":"Send `POST` request to the Onyx server and\nreturn `ResponseWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"returns 200 OK\" do\n  response = Onyx::HTTP::Spec.get(\"/foo\")\n  response.assert(200, \"OK\")\nend\n```","summary":"<p>Send <code>POST</code> request to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/ResponseWrapper.html\">ResponseWrapper</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L24","def":{"name":"post","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"response = client.post(*args, **nargs)\nreturn ResponseWrapper.new(response)\n"}},{"id":"put(*args,**nargs)-class-method","html_id":"put(*args,**nargs)-class-method","name":"put","doc":"Send `PUT` request to the Onyx server and\nreturn `ResponseWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"returns 200 OK\" do\n  response = Onyx::HTTP::Spec.get(\"/foo\")\n  response.assert(200, \"OK\")\nend\n```","summary":"<p>Send <code>PUT</code> request to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/ResponseWrapper.html\">ResponseWrapper</a></code>.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L24","def":{"name":"put","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"response = client.put(*args, **nargs)\nreturn ResponseWrapper.new(response)\n"}},{"id":"ws(path:String,headers:::HTTP::Headers=::HTTP::Headers.new)-class-method","html_id":"ws(path:String,headers:::HTTP::Headers=::HTTP::Headers.new)-class-method","name":"ws","doc":"Initialize a new websocket connection to the Onyx server\nand return `WebSocketWrapper`.\n\n```\nrequire \"onyx/http/spec\"\nrequire \"../my_server\"\n\nit \"echoes\" do\n  socket = Onyx::HTTP::Spec.ws(\"/\")\n  socket.assert_response(\"ping\", \"pong\")\n  # Or\n  socket.send(\"ping\")\n  socket.assert_response(\"pong\")\nend\n```","summary":"<p>Initialize a new websocket connection to the Onyx server and return <code><a href=\"../../Onyx/HTTP/Spec/WebSocketWrapper.html\">WebSocketWrapper</a></code>.</p>","abstract":false,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"},{"name":"headers","doc":null,"default_value":"::HTTP::Headers.new","external_name":"headers","restriction":"::HTTP::Headers"}],"args_string":"(path : String, headers : ::HTTP::Headers = <span class=\"t\">::</span><span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span>.<span class=\"k\">new</span>)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L58","def":{"name":"ws","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"},{"name":"headers","doc":null,"default_value":"::HTTP::Headers.new","external_name":"headers","restriction":"::HTTP::Headers"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"socket = ::HTTP::WebSocket.new(client.host, path, client.port, headers: headers)\nspawn(socket.run)\nreturn WebSocketWrapper.new(socket)\n"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP/Spec/ResponseWrapper","path":"Onyx/HTTP/Spec/ResponseWrapper.html","kind":"class","full_name":"Onyx::HTTP::Spec::ResponseWrapper","name":"ResponseWrapper","abstract":false,"superclass":{"html_id":"github.com/onyxframework/onyx/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/onyxframework/onyx/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/onyxframework/onyx/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"onyx/http/spec.cr","line_number":64,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP/Spec","kind":"module","full_name":"Onyx::HTTP::Spec","name":"Spec"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"assert(status_code:Int,body:String,headers:Hash(String,String))-instance-method","html_id":"assert(status_code:Int,body:String,headers:Hash(String,String))-instance-method","name":"assert","doc":"Assert response *status_code*, *body* and *headers*.","summary":"<p>Assert response <em>status_code</em>, <em>body</em> and <em>headers</em>.</p>","abstract":false,"args":[{"name":"status_code","doc":null,"default_value":"","external_name":"status_code","restriction":"Int"},{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":"String"},{"name":"headers","doc":null,"default_value":"","external_name":"headers","restriction":"Hash(String, String)"}],"args_string":"(status_code : Int, body : String, headers : Hash(String, String))","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L95","def":{"name":"assert","args":[{"name":"status_code","doc":null,"default_value":"","external_name":"status_code","restriction":"Int"},{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":"String"},{"name":"headers","doc":null,"default_value":"","external_name":"headers","restriction":"Hash(String, String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"assert(status_code, body)\nheaders.should(eq(headers))\n"}},{"id":"assert(status_code:Int,body:String)-instance-method","html_id":"assert(status_code:Int,body:String)-instance-method","name":"assert","doc":"Assert response *status_code* and *body*.","summary":"<p>Assert response <em>status_code</em> and <em>body</em>.</p>","abstract":false,"args":[{"name":"status_code","doc":null,"default_value":"","external_name":"status_code","restriction":"Int"},{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":"String"}],"args_string":"(status_code : Int, body : String)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L89","def":{"name":"assert","args":[{"name":"status_code","doc":null,"default_value":"","external_name":"status_code","restriction":"Int"},{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"assert(status_code)\nbody.should(eq(body))\n"}},{"id":"assert(status_code:Int)-instance-method","html_id":"assert(status_code:Int)-instance-method","name":"assert","doc":"Assert response *status_code*.","summary":"<p>Assert response <em>status_code</em>.</p>","abstract":false,"args":[{"name":"status_code","doc":null,"default_value":"","external_name":"status_code","restriction":"Int"}],"args_string":"(status_code : Int)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L84","def":{"name":"assert","args":[{"name":"status_code","doc":null,"default_value":"","external_name":"status_code","restriction":"Int"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"status_code.should(eq(status_code))"}},{"id":"body:String-instance-method","html_id":"body:String-instance-method","name":"body","doc":"`#response`'s body.","summary":"<p><code><a href=\"../../../Onyx/HTTP/Spec/ResponseWrapper.html#response%3A%3A%3AHTTP%3A%3AClient%3A%3AResponse-instance-method\">#response</a></code>'s body.</p>","abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L74","def":{"name":"body","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@response.body"}},{"id":"headers:::HTTP::Headers-instance-method","html_id":"headers:::HTTP::Headers-instance-method","name":"headers","doc":"`#response`'s headers.","summary":"<p><code><a href=\"../../../Onyx/HTTP/Spec/ResponseWrapper.html#response%3A%3A%3AHTTP%3A%3AClient%3A%3AResponse-instance-method\">#response</a></code>'s headers.</p>","abstract":false,"args":[],"args_string":" : ::HTTP::Headers","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L79","def":{"name":"headers","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"::HTTP::Headers","visibility":"Public","body":"@response.headers"}},{"id":"response:::HTTP::Client::Response-instance-method","html_id":"response:::HTTP::Client::Response-instance-method","name":"response","doc":"Direct response accessor, if needed.","summary":"<p>Direct response accessor, if needed.</p>","abstract":false,"args":[],"args_string":" : ::HTTP::Client::Response","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L68","def":{"name":"response","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"::HTTP::Client::Response","visibility":"Public","body":"@response"}},{"id":"status_code:Int32-instance-method","html_id":"status_code:Int32-instance-method","name":"status_code","doc":"`#response`'s status code.","summary":"<p><code><a href=\"../../../Onyx/HTTP/Spec/ResponseWrapper.html#response%3A%3A%3AHTTP%3A%3AClient%3A%3AResponse-instance-method\">#response</a></code>'s status code.</p>","abstract":false,"args":[],"args_string":" : Int32","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L69","def":{"name":"status_code","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@response.status_code"}}],"macros":[],"types":[]},{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP/Spec/WebSocketWrapper","path":"Onyx/HTTP/Spec/WebSocketWrapper.html","kind":"class","full_name":"Onyx::HTTP::Spec::WebSocketWrapper","name":"WebSocketWrapper","abstract":false,"superclass":{"html_id":"github.com/onyxframework/onyx/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/onyxframework/onyx/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/onyxframework/onyx/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"onyx/http/spec.cr","line_number":104,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/onyxframework/onyx/Onyx/HTTP/Spec","kind":"module","full_name":"Onyx::HTTP::Spec","name":"Spec"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"assert_response(expected,wait:Time::Span|Number=0.1.seconds)-instance-method","html_id":"assert_response(expected,wait:Time::Span|Number=0.1.seconds)-instance-method","name":"assert_response","doc":"Assert the latest socket response after *wait*.\nIt includes `sleep`, which allows a websocket handler to process the request.\n\n```\nsocket.send(\"ping\")\nsocket.assert_response(\"pong\")\n```","summary":"<p>Assert the latest socket response after <em>wait</em>.</p>","abstract":false,"args":[{"name":"expected","doc":null,"default_value":"","external_name":"expected","restriction":""},{"name":"wait","doc":null,"default_value":"0.1.seconds","external_name":"wait","restriction":"Time::Span | Number"}],"args_string":"(expected, wait : Time::Span | Number = <span class=\"n\">0.1</span>.seconds)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L123","def":{"name":"assert_response","args":[{"name":"expected","doc":null,"default_value":"","external_name":"expected","restriction":""},{"name":"wait","doc":null,"default_value":"0.1.seconds","external_name":"wait","restriction":"Time::Span | Number"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"sleep(wait)\nresponses.last?.should(eq(expected))\n"}},{"id":"assert_response(request,*args,**nargs)-instance-method","html_id":"assert_response(request,*args,**nargs)-instance-method","name":"assert_response","doc":"Send the *request* and then call `#assert_response` with given arguments.","summary":"<p>Send the <em>request</em> and then call <code><a href=\"../../../Onyx/HTTP/Spec/WebSocketWrapper.html#assert_response%28expected%2Cwait%3ATime%3A%3ASpan%7CNumber%3D0.1.seconds%29-instance-method\">#assert_response</a></code> with given arguments.</p>","abstract":false,"args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(request, *args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L129","def":{"name":"assert_response","args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"send(request)\nassert_response(*args, **nargs)\n"}},{"id":"responses:Array(Slice(UInt8)|String)-instance-method","html_id":"responses:Array(Slice(UInt8)|String)-instance-method","name":"responses","doc":"Reponses history.","summary":"<p>Reponses history.</p>","abstract":false,"args":[],"args_string":" : Array(Slice(UInt8) | String)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L111","def":{"name":"responses","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@responses"}},{"id":"send(payload)-instance-method","html_id":"send(payload)-instance-method","name":"send","doc":"Send *payload* to the `#socket`.","summary":"<p>Send <em>payload</em> to the <code><a href=\"../../../Onyx/HTTP/Spec/WebSocketWrapper.html#socket%3A%3A%3AHTTP%3A%3AWebSocket-instance-method\">#socket</a></code>.</p>","abstract":false,"args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""}],"args_string":"(payload)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L112","def":{"name":"send","args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@socket.send(payload)"}},{"id":"socket:::HTTP::WebSocket-instance-method","html_id":"socket:::HTTP::WebSocket-instance-method","name":"socket","doc":"Direct socket accessor, if needed.","summary":"<p>Direct socket accessor, if needed.</p>","abstract":false,"args":[],"args_string":" : ::HTTP::WebSocket","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/http/spec.cr#L108","def":{"name":"socket","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"::HTTP::WebSocket","visibility":"Public","body":"@socket"}}],"macros":[],"types":[]}]}]},{"html_id":"github.com/onyxframework/onyx/Onyx/SQL","path":"Onyx/SQL.html","kind":"module","full_name":"Onyx::SQL","name":"SQL","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"lib/onyx-sql/src/onyx-sql/bulk_query/delete.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/bulk_query/delete.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/bulk_query/insert.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/bulk_query/insert.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/bulk_query/returning.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/bulk_query/returning.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/bulk_query/where.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/bulk_query/where.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/bulk_query.cr","line_number":4,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/bulk_query.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/delete.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/delete.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/group_by.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/group_by.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/having.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/having.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/insert.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/insert.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/join.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/join.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/limit.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/limit.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/offset.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/offset.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/order_by.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/order_by.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/returning.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/returning.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/select.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/select.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/set.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/set.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/update.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/update.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/where.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/where.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query/wherish.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query/wherish.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/query.cr","line_number":3,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/query.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/repository/exec.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/repository/exec.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/repository/logger.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/repository/logger.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/repository/query.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/repository/query.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/repository/scalar.cr","line_number":1,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/repository/scalar.cr"},{"filename":"lib/onyx-sql/src/onyx-sql/repository.cr","line_number":3,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql/repository.cr"},{"filename":"lib/onyx-sql/src/onyx-sql.cr","line_number":5,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/lib/onyx-sql/src/onyx-sql.cr"},{"filename":"onyx/sql.cr","line_number":7,"url":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/sql.cr"}],"repository_name":"github.com/onyxframework/onyx","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/onyxframework/onyx/Onyx","kind":"module","full_name":"Onyx","name":"Onyx"},"doc":"An SQL ORM for Crystal.","summary":"<p>An SQL ORM for Crystal.</p>","class_methods":[{"id":"exec(*args,**nargs)-class-method","html_id":"exec(*args,**nargs)-class-method","name":"exec","doc":"Call `#exec` on the singleton `.repo` instance.","summary":"<p>Call <code><a href=\"../Onyx/SQL.html#exec%28%2Aargs%2C%2A%2Anargs%29-class-method\">#exec</a></code> on the singleton <code><a href=\"../Onyx/SQL.html#repo%3AOnyx%3A%3ASQL%3A%3ARepository-class-method\">.repo</a></code> instance.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/sql.cr#L25","def":{"name":"exec","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"repo.exec(*args, **nargs)"}},{"id":"query(*args,**nargs)-class-method","html_id":"query(*args,**nargs)-class-method","name":"query","doc":"Call `#query` on the singleton `.repo` instance.","summary":"<p>Call <code><a href=\"../Onyx/SQL.html#query%28%2Aargs%2C%2A%2Anargs%29-class-method\">#query</a></code> on the singleton <code><a href=\"../Onyx/SQL.html#repo%3AOnyx%3A%3ASQL%3A%3ARepository-class-method\">.repo</a></code> instance.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/sql.cr#L20","def":{"name":"query","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"repo.query(*args, **nargs)"}},{"id":"repo:Onyx::SQL::Repository-class-method","html_id":"repo:Onyx::SQL::Repository-class-method","name":"repo","doc":"Singleton `Onyx::SQL::Repository instance`.\nHas `Onyx.db` as a *db* and and `Onyx.logger` as a *logger*.","summary":"<p>Singleton <code>Onyx::SQL::Repository instance</code>.</p>","abstract":false,"args":[],"args_string":" : Onyx::SQL::Repository","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/sql.cr#L18","def":{"name":"repo","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Onyx::SQL::Repository","visibility":"Public","body":"@@repo"}},{"id":"repo=(repo:Onyx::SQL::Repository)-class-method","html_id":"repo=(repo:Onyx::SQL::Repository)-class-method","name":"repo=","doc":"Singleton `Onyx::SQL::Repository instance`.\nHas `Onyx.db` as a *db* and and `Onyx.logger` as a *logger*.","summary":"<p>Singleton <code>Onyx::SQL::Repository instance</code>.</p>","abstract":false,"args":[{"name":"repo","doc":null,"default_value":"","external_name":"repo","restriction":"Onyx::SQL::Repository"}],"args_string":"(repo : Onyx::SQL::Repository)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/sql.cr#L22","def":{"name":"repo=","args":[{"name":"repo","doc":null,"default_value":"","external_name":"repo","restriction":"Onyx::SQL::Repository"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@repo = repo"}},{"id":"scalar(*args,**nargs)-class-method","html_id":"scalar(*args,**nargs)-class-method","name":"scalar","doc":"Call `#scalar` on the singleton `.repo` instance.","summary":"<p>Call <code><a href=\"../Onyx/SQL.html#scalar%28%2Aargs%2C%2A%2Anargs%29-class-method\">#scalar</a></code> on the singleton <code><a href=\"../Onyx/SQL.html#repo%3AOnyx%3A%3ASQL%3A%3ARepository-class-method\">.repo</a></code> instance.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **nargs)","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/sql.cr#L30","def":{"name":"scalar","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"nargs","doc":null,"default_value":"","external_name":"nargs","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"repo.scalar(*args, **nargs)"}},{"id":"transaction(&block:DB::Transaction->)-class-method","html_id":"transaction(&amp;block:DB::Transaction-&gt;)-class-method","name":"transaction","doc":"Put the `.repo`'s current database connection into  transaction mode and yield\nthat [`DB::Transaction`](http://crystal-lang.github.io/crystal-db/api/0.5.1/DB/Transaction.html) object.\n\nAll repository requests would be made within the transaction.\nThe transaction is closed after the yield unless it's explicitly closed before\n(i.e. committed or rolled back).\n\n```\nOnyx::SQL.transaction do |tx|\n  Onyx.query(User.where(id: 1)) # Request is made within the transaction\n  tx.connection                 # You have access to the raw `DB::Connection` instance\nend\n```","summary":"<p>Put the <code><a href=\"../Onyx/SQL.html#repo%3AOnyx%3A%3ASQL%3A%3ARepository-class-method\">.repo</a></code>'s current database connection into  transaction mode and yield that <a href=\"http://crystal-lang.github.io/crystal-db/api/0.5.1/DB/Transaction.html\" target=\"_blank\"><code>DB::Transaction</code></a> object.</p>","abstract":false,"args":[],"args_string":"(&block : DB::Transaction -> )","source_link":"https://github.com/onyxframework/onyx/blob/5e9efde5fe45dbff451908c5bcf21c00a2a707c6/src/onyx/sql.cr#L47","def":{"name":"transaction","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(::DB::Transaction -> )"},"return_type":"","visibility":"Public","body":"previous_db = repo.db\nrepo.db.transaction do |tx|\n  begin\n    repo.db = tx.connection\n    yield tx\n    repo.db = previous_db\n  ensure\n    if tx.closed?\n    else\n      tx.commit\n    end\n  end\nend\n"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}]}})